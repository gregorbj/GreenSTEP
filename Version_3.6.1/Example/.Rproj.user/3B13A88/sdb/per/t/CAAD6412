{
    "collab_server" : "",
    "contents" : "#===========\n#GreenSTEP.r\n#===========\n#Copyright 2009 - 2016, Oregon Department of Transportation\n#Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use\n#this file except in compliance with the License. You may obtain a copy of the\n#License at\n#http://www.apache.org/licenses/LICENSE-2.0\n#Unless required by applicable law or agreed to in writing, software distributed\n#under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n#CONDITIONS OF ANY KIND, either express or implied.  See the License for the\n#specific language governing permissions and limitations under the License.\n#Version: 3.5\n#Date: 12/5/16\n\n#Description\n#===========\n#This is the main script for running the GreenSTEP Model. This script sets up\n#run parameters and calls modules which implement various portions of the\n#GreenSTEP model. These modules include:\n#1) The GreenSTEP_Inputs.r module loads all of the model objects and data needed\n#to run the GreenSTEP model.\n#2) The \"GreenSTEP_Hh_Synthesis.r\" module generates synthetic households for\n#each county and year from population forecasts of persons by age group. The\n#synthetic households have characteristics of numbers of persons by each of six\n#age groups, household income, development type, density,. These are saved as\n#RData files in a folder named 'SynHsld' in the the model folder. This module is\n#run only if it has not been run before because the same populations should be\n#used for all scenarios to reduce stochastic effects on the results.\n#3) The GreenSTEP_Sim.r module performs all of the household microsimulation\n#calculations for determining vehicle ownership, household travel and vehicle\n#characteristics, use, and emissions.\n#4) The GreenSTEP_Sim_Outputs.r module computes summary output tables from the\n#GreenSTEP_Sim results.\n\n#Read in parameters that are unique to the model run\n#===================================================\nsource(\"run_parameters.txt\")\n\n#Identify directory locations for model, inputs, etc.\n#====================================================\n# Make a list to store the directory references\nDir_ <- list()\n# Directory references are made with respect to the run directory\nDir_$RunDir <- getwd()\n# The scenario inputs directory location\nDir_$InputDir <- \"scenario/inputs\"\n# The scenario outputs directory location\nDir_$OutputDir <- \"scenario/outputs\"\n# Directory containing model objects and inputs\nDir_$ModelDir <- \"model\"\n# Directory where model scripts are located\nDir_$ScriptDir <- \"scripts\"\nattach(Dir_)\n\n#Define function to load an RData object to an object name\n#=========================================================\nassignLoad <- function(filename) {\n  load(filename)\n  get(ls()[ls() != \"filename\"])\n}\n\n#Run the GreenSTEP_Inputs.r script\n#=================================\n#The GreenSTEP_Inputs.r script loads all of the data objects needed to run the\n#model.\nsource(paste(ScriptDir, \"/GreenSTEP_Inputs.r\", sep = \"\"))\n\n\n#Run the GreenSTEP_Hh_Synthesis.r script if necessary\n#====================================================\nfor (yr in RunYears) {\n  HsldFile <- paste(ModelDir, \"/Hsld\", yr, \".RData\", sep = \"\")\n  if (!file.exists(HsldFile)) {\n    source(paste0(ScriptDir, \"/GreenSTEP_Hh_Synthesis.r\"))\n  }\n}\nrm(HsldFile)\n\n#Run the GreenSTEP_Sim.r script\n#==============================\nif (!OnlySynthesizeHh) {\n  source(paste(ScriptDir, \"/GreenSTEP_Sim.r\", sep = \"\"))\n}\n\n#Run the GreenSTEP_Sim_Outputs.r script\n#======================================\nif (!OnlySynthesizeHh) {\n  source(paste(ScriptDir, \"/GreenSTEP_Sim_Outputs.r\", sep = \"\"))\n}\n\n#Run the summary measures script\n#===============================\nif (!OnlySynthesizeHh) {\n  source(paste(ScriptDir, \"/calc_summary_measures.r\", sep=\"\"))\n}\n  \n\n",
    "created" : 1480992185893.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2597822382",
    "id" : "CAAD6412",
    "lastKnownWriteTime" : 1507306377,
    "last_content_update" : 1507306377812,
    "path" : "~/GitHub/GreenSTEP/Version_3.6.1/Example/scripts/GreenSTEP.r",
    "project_path" : "scripts/GreenSTEP.r",
    "properties" : {
    },
    "relative_order" : 5,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}